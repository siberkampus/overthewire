<!-- templates/admin/dashboard.html -->
{{define "content"}}
<div class="dashboard">
    <!-- HoÅŸ Geldin MesajÄ± -->
    <div class="welcome-card">
        <div class="welcome-content">
            <h2>HoÅŸ Geldin, {{.Admin.Username}}! ðŸ‘‹</h2>
            <p>Sistem ÅŸu anda saÄŸlÄ±klÄ± Ã§alÄ±ÅŸÄ±yor. BugÃ¼nkÃ¼ aktiviteleri kontrol edelim.</p>
        </div>
        <div class="welcome-date">
            <i class="fas fa-calendar-alt"></i>
            {{.CurrentDate}}
        </div>
    </div>

    <!-- Ä°statistik KartlarÄ± -->
    <div class="stats-grid">
        <!-- Toplam KullanÄ±cÄ± -->
        <div class="stat-card">
            <div class="stat-icon">
                <i class="fas fa-users"></i>
            </div>
            <div class="stat-content">
                <div class="stat-value">{{.Stats.TotalUsers}}</div>
                <div class="stat-label">Toplam KullanÄ±cÄ±</div>
                <div class="stat-change positive">
                    <i class="fas fa-arrow-up"></i> +{{.Stats.NewUsersToday}} bugÃ¼n
                </div>
            </div>
            <div class="stat-chart">
                <span class="sparkline">5,8,12,9,15,18,21</span>
            </div>
        </div>

        <!-- Aktif KullanÄ±cÄ± -->
        <div class="stat-card">
            <div class="stat-icon">
                <i class="fas fa-user-check"></i>
            </div>
            <div class="stat-content">
                <div class="stat-value">{{.Stats.ActiveUsers}}</div>
                <div class="stat-label">Aktif (24s)</div>
                <div class="stat-change positive">
                     <i class="fas fa-arrow-up"></i> %{{printf "%.1f" .ActivePercentage}} katÄ±lÄ±m
                </div>
            </div>
            <div class="stat-chart">
                <span class="sparkline">12,15,18,14,20,22,19</span>
            </div>
        </div>

        <!-- Toplam Makine -->
        <div class="stat-card">
            <div class="stat-icon">
                <i class="fas fa-server"></i>
            </div>
            <div class="stat-content">
                <div class="stat-value">{{.Stats.TotalMachines}}</div>
                <div class="stat-label">Aktif Makine</div>
                <div class="stat-change">
                    <i class="fas fa-minus"></i> {{.Stats.TotalMachines}} toplam
                </div>
            </div>
            <div class="stat-chart">
                <span class="sparkline">3,4,5,5,6,6,7</span>
            </div>
        </div>

        <!-- Toplam Ã‡Ã¶zÃ¼m -->
        <div class="stat-card">
            <div class="stat-icon">
                <i class="fas fa-flag"></i>
            </div>
            <div class="stat-content">
                <div class="stat-value">{{.Stats.TotalSubmissions}}</div>
                <div class="stat-label">Toplam Ã‡Ã¶zÃ¼m</div>
                <div class="stat-change positive">
                    <i class="fas fa-arrow-up"></i> +{{.Stats.SubmissionsToday}} bugÃ¼n
                </div>
            </div>
            <div class="stat-chart">
                <span class="sparkline">25,32,28,35,42,38,45</span>
            </div>
        </div>
    </div>

    <div class="stats-grid">
        <!-- VIP KullanÄ±cÄ±lar -->
        <div class="stat-card">
            <div class="stat-icon">
                <i class="fas fa-crown" style="color: #ffd700;"></i>
            </div>
            <div class="stat-content">
                <div class="stat-value">{{.Stats.TotalVIPUsers}}</div>
                <div class="stat-label">VIP KullanÄ±cÄ±</div>
                <div class="stat-change">
                    <i class="fas fa-coins"></i> â‚º{{printf "%.2f" .Stats.VIPRevenue}} bugÃ¼n
                </div>
            </div>
        </div>

        <!-- Ortalama Puan -->
        <div class="stat-card">
            <div class="stat-icon">
                <i class="fas fa-chart-line"></i>
            </div>
            <div class="stat-content">
                <div class="stat-value">{{printf "%.1f" .Stats.AveragePoints}}</div>
                <div class="stat-label">Ortalama Puan</div>
                <div class="stat-change">
                    <i class="fas fa-users"></i> {{.Stats.TotalUsers}} kullanÄ±cÄ±
                </div>
            </div>
        </div>

        <!-- En YÃ¼ksek Puan -->
        <div class="stat-card">
            <div class="stat-icon">
                <i class="fas fa-trophy" style="color: #ffd700;"></i>
            </div>
            <div class="stat-content">
                <div class="stat-value">{{.Stats.TopUserPoints}}</div>
                <div class="stat-label">En YÃ¼ksek Puan</div>
                <div class="stat-change">
                    <i class="fas fa-medal"></i> Rekor
                </div>
            </div>
        </div>

        <!-- BaÅŸarÄ± OranÄ± -->
        <div class="stat-card">
            <div class="stat-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <div class="stat-content">
                <div class="stat-value">{{printf "%.1f" .Stats.SuccessRate}}%</div>
                <div class="stat-label">BaÅŸarÄ± OranÄ±</div>
                <div class="stat-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: {{.Stats.SuccessRate}}%"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Grafikler -->
    <div class="charts-grid">
        <!-- Aktivite GrafiÄŸi -->
        <div class="chart-card">
            <div class="chart-header">
                <h3 class="chart-title">
                    <i class="fas fa-chart-bar"></i>
                    Son 30 GÃ¼n Aktivite
                </h3>
                <div class="chart-actions">
                    <button class="chart-btn active" onclick="changeChartPeriod('week')">Hafta</button>
                    <button class="chart-btn" onclick="changeChartPeriod('month')">Ay</button>
                    <button class="chart-btn" onclick="changeChartPeriod('year')">YÄ±l</button>
                </div>
            </div>
            <div class="chart-container">
                <canvas id="activityChart"></canvas>
            </div>
        </div>

        <!-- KullanÄ±cÄ± DaÄŸÄ±lÄ±mÄ± -->
        <div class="chart-card">
            <div class="chart-header">
                <h3 class="chart-title">
                    <i class="fas fa-chart-pie"></i>
                    KullanÄ±cÄ± DaÄŸÄ±lÄ±mÄ±
                </h3>
            </div>
            <div class="chart-container">
                <canvas id="userChart"></canvas>
            </div>
            <div class="chart-legend">
                <div class="legend-item">
                    <span class="legend-color" style="background: #00ff9d;"></span>
                    <span class="legend-label">Aktif</span>
                    <span class="legend-value">{{.Stats.ActiveUsers}}</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color" style="background: #ffd700;"></span>
                    <span class="legend-label">VIP</span>
                    <span class="legend-value">{{.Stats.TotalVIPUsers}}</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color" style="background: #00b8ff;"></span>
                    <span class="legend-label">Yeni</span>
                    <span class="legend-value">{{.Stats.NewUsersToday}}</span>
                </div>
                <div class="legend-item">
                    <span class="legend-color" style="background: #6a7a8a;"></span>
                    <span class="legend-label">Pasif</span>
                    <span class="legend-value">{{subtract .Stats.TotalUsers .Stats.ActiveUsers}}</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Alt Grid -->
    <div class="bottom-grid">
        <!-- Son KullanÄ±cÄ±lar -->
        <div class="recent-card">
            <div class="card-header">
                <h3 class="card-title">
                    <i class="fas fa-user-plus"></i>
                    Son KayÄ±t Olan KullanÄ±cÄ±lar
                </h3>
                <a href="/admin/users" class="card-link">
                    TÃ¼mÃ¼nÃ¼ GÃ¶r <i class="fas fa-arrow-right"></i>
                </a>
            </div>
            <div class="table-responsive">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>KullanÄ±cÄ± AdÄ±</th>
                            <th>Email</th>
                            <th>Puan</th>
                            <th>VIP</th>
                            <th>KayÄ±t Tarihi</th>
                            <th>Ä°ÅŸlem</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{range .RecentUsers}}
                        <tr>
                            <td>#{{.ID}}</td>
                            <td>
                                <div class="user-info">
                                    <img src="{{.Avatar}}" alt="{{.Username}}" class="user-avatar">
                                    <span>{{.Username}}</span>
                                </div>
                            </td>
                            <td>{{.Email}}</td>
                            <td><span class="points">{{.Points}}</span></td>
                            <td>
                                {{if .IsVIP}}
                                <span class="badge badge-vip">VIP</span>
                                {{else}}
                                <span class="badge">-</span>
                                {{end}}
                            </td>
                            <td>{{.CreatedAt.Format "02.01.2006 15:04"}}</td>
                            <td>
                                <a href="/admin/users/{{.ID}}" class="btn-action">
                                    <i class="fas fa-eye"></i>
                                </a>
                                <button class="btn-action" onclick="editUser({{.ID}})">
                                    <i class="fas fa-edit"></i>
                                </button>
                            </td>
                        </tr>
                        {{else}}
                        <tr>
                            <td colspan="7" class="text-center">HenÃ¼z kullanÄ±cÄ± yok</td>
                        </tr>
                        {{end}}
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Son Ã‡Ã¶zÃ¼mler -->
        <div class="recent-card">
            <div class="card-header">
                <h3 class="card-title">
                    <i class="fas fa-flag"></i>
                    Son Ã‡Ã¶zÃ¼mler
                </h3>
                <a href="/admin/submissions" class="card-link">
                    TÃ¼mÃ¼nÃ¼ GÃ¶r <i class="fas fa-arrow-right"></i>
                </a>
            </div>
            <div class="table-responsive">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>KullanÄ±cÄ±</th>
                            <th>Makine</th>
                            <th>Soru</th>
                            <th>Durum</th>
                            <th>Tarih</th>
                            <th>Ä°ÅŸlem</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{range .RecentSubmissions}}
                        <tr>
                            <td>#{{.ID}}</td>
                            <td>{{.Username}}</td>
                            <td>{{.MachineName}}</td>
                            <td>{{.QuestionTitle}}</td>
                            <td>
                                {{if eq .Status "accepted"}}
                                <span class="badge badge-success">
                                    <i class="fas fa-check-circle"></i> BaÅŸarÄ±lÄ±
                                </span>
                                {{else if eq .Status "rejected"}}
                                <span class="badge badge-danger">
                                    <i class="fas fa-times-circle"></i> BaÅŸarÄ±sÄ±z
                                </span>
                                {{else}}
                                <span class="badge badge-warning">
                                    <i class="fas fa-clock"></i> Beklemede
                                </span>
                                {{end}}
                            </td>
                            <td>{{.SubmittedAt.Format "02.01.2006 15:04"}}</td>
                            <td>
                                <a href="/admin/submissions/{{.ID}}" class="btn-action">
                                    <i class="fas fa-eye"></i>
                                </a>
                            </td>
                        </tr>
                        {{else}}
                        <tr>
                            <td colspan="7" class="text-center">HenÃ¼z Ã§Ã¶zÃ¼m yok</td>
                        </tr>
                        {{end}}
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- PopÃ¼ler Makineler ve Sistem Durumu -->
    <div class="bottom-grid">
        <!-- PopÃ¼ler Makineler -->
        <div class="recent-card">
            <div class="card-header">
                <h3 class="card-title">
                    <i class="fas fa-fire"></i>
                    PopÃ¼ler Makineler
                </h3>
            </div>
            <div class="machines-list">
                {{range .PopularMachines}}
                <div class="machine-item">
                    <div class="machine-info">
                        <div class="machine-name">
                            {{.Name}}
                            <span class="difficulty-badge difficulty-{{.Difficulty}}">
                                {{.Difficulty}}
                            </span>
                        </div>
                        <div class="machine-stats">
                            <span class="stat">
                                <i class="fas fa-flag"></i> {{.Submissions}} Ã§Ã¶zÃ¼m
                            </span>
                            <span class="stat">
                                <i class="fas fa-chart-line"></i> %{{.SuccessRate}} baÅŸarÄ±
                            </span>
                        </div>
                    </div>
                    <div class="machine-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: {{.SuccessRate}}%"></div>
                        </div>
                    </div>
                </div>
                {{else}}
                <p class="text-center">HenÃ¼z makine yok</p>
                {{end}}
            </div>
        </div>

        <!-- Sistem Durumu -->
        <div class="recent-card">
            <div class="card-header">
                <h3 class="card-title">
                    <i class="fas fa-heartbeat"></i>
                    Sistem Durumu
                </h3>
                <span class="status-badge status-{{.SystemHealth.Status}}">
                    {{if eq .SystemHealth.Status "healthy"}}SAÄžLIKLI{{else}}UYARI{{end}}
                </span>
            </div>
            <div class="system-stats">
                <div class="system-stat">
                    <div class="stat-label">
                        <i class="fas fa-microchip"></i>
                        CPU KullanÄ±mÄ±
                    </div>
                    <div class="stat-bar">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: {{.SystemHealth.CPUUsage}}%"></div>
                        </div>
                        <span class="stat-value">{{.SystemHealth.CPUUsage}}%</span>
                    </div>
                </div>
                <div class="system-stat">
                    <div class="stat-label">
                        <i class="fas fa-memory"></i>
                        RAM KullanÄ±mÄ±
                    </div>
                    <div class="stat-bar">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: {{.SystemHealth.MemoryUsage}}%"></div>
                        </div>
                        <span class="stat-value">{{.SystemHealth.MemoryUsage}}%</span>
                    </div>
                </div>
                <div class="system-stat">
                    <div class="stat-label">
                        <i class="fas fa-hdd"></i>
                        Disk KullanÄ±mÄ±
                    </div>
                    <div class="stat-bar">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: {{.SystemHealth.DiskUsage}}%"></div>
                        </div>
                        <span class="stat-value">{{.SystemHealth.DiskUsage}}%</span>
                    </div>
                </div>
                <div class="system-info-grid">
                    <div class="info-item">
                        <div class="info-label">Aktif Container</div>
                        <div class="info-value">{{.SystemHealth.ActiveContainers}}</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">DB BaÄŸlantÄ±</div>
                        <div class="info-value">{{.SystemHealth.DatabaseConnections}}</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Son Yedekleme</div>
                        <div class="info-value">2 saat Ã¶nce</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Uptime</div>
                        <div class="info-value">15 gÃ¼n</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- HÄ±zlÄ± Ä°ÅŸlemler -->
    <div class="quick-actions">
        <button class="quick-action-btn" onclick="location.href='/admin/machines/new'">
            <i class="fas fa-plus-circle"></i>
            <span>Yeni Makine</span>
        </button>
        <button class="quick-action-btn" onclick="location.href='/admin/users/new'">
            <i class="fas fa-user-plus"></i>
            <span>Yeni KullanÄ±cÄ±</span>
        </button>
        <button class="quick-action-btn" onclick="exportData()">
            <i class="fas fa-download"></i>
            <span>Veri DÄ±ÅŸa Aktar</span>
        </button>
        <button class="quick-action-btn" onclick="clearCache()">
            <i class="fas fa-broom"></i>
            <span>Cache Temizle</span>
        </button>
        <button class="quick-action-btn" onclick="runBackup()">
            <i class="fas fa-database"></i>
            <span>Yedekle</span>
        </button>
        <button class="quick-action-btn" onclick="viewLogs()">
            <i class="fas fa-history"></i>
            <span>Sistem LoglarÄ±</span>
        </button>
    </div>
</div>

<style>
/* Dashboard Styles */
.dashboard {
    display: flex;
    flex-direction: column;
    gap: 2rem;
}

/* Welcome Card */
.welcome-card {
    background: linear-gradient(135deg, rgba(0, 255, 157, 0.1), rgba(0, 184, 255, 0.1));
    border: 1px solid #00ff9d;
    border-radius: 15px;
    padding: 2rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 1rem;
}

.welcome-content h2 {
    font-family: 'Share Tech Mono', monospace;
    font-size: 1.8rem;
    color: #00ff9d;
    margin-bottom: 0.5rem;
}

.welcome-content p {
    color: #b0b0b0;
}

.welcome-date {
    background: rgba(0, 0, 0, 0.3);
    border: 1px solid #2a3a4a;
    border-radius: 10px;
    padding: 0.8rem 1.5rem;
    color: #00ff9d;
}

.welcome-date i {
    margin-right: 0.5rem;
}

/* Stats Grid */
.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.5rem;
}

.stat-card {
    background: rgba(20, 30, 40, 0.8);
    border: 1px solid #2a3a4a;
    border-radius: 15px;
    padding: 1.5rem;
    display: flex;
    align-items: center;
    gap: 1rem;
    transition: 0.3s;
    position: relative;
    overflow: hidden;
}

.stat-card:hover {
    transform: translateY(-3px);
    border-color: #00ff9d;
    box-shadow: 0 10px 30px rgba(0, 255, 157, 0.2);
}

.stat-card::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(45deg, transparent, rgba(0, 255, 157, 0.05), transparent);
    transform: rotate(45deg);
    animation: shine 6s infinite;
    pointer-events: none;
}

.stat-icon {
    width: 60px;
    height: 60px;
    background: rgba(0, 255, 157, 0.1);
    border: 1px solid #00ff9d;
    border-radius: 15px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.8rem;
    color: #00ff9d;
}

.stat-content {
    flex: 1;
}

.stat-value {
    font-family: 'Share Tech Mono', monospace;
    font-size: 2rem;
    color: #00ff9d;
    line-height: 1.2;
}

.stat-label {
    color: #b0b0b0;
    font-size: 0.9rem;
    margin-bottom: 0.3rem;
}

.stat-change {
    font-size: 0.8rem;
}

.stat-change.positive {
    color: #00ff9d;
}

.stat-change i {
    margin-right: 0.3rem;
}

.stat-chart {
    position: absolute;
    bottom: 0;
    right: 0;
    opacity: 0.2;
}

.stat-progress {
    margin-top: 0.5rem;
}

/* Charts Grid */
.charts-grid {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 1.5rem;
}

.chart-card {
    background: rgba(20, 30, 40, 0.8);
    border: 1px solid #2a3a4a;
    border-radius: 15px;
    padding: 1.5rem;
}

.chart-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
}

.chart-title {
    font-family: 'Share Tech Mono', monospace;
    color: #00ff9d;
    font-size: 1.1rem;
}

.chart-title i {
    margin-right: 0.5rem;
}

.chart-actions {
    display: flex;
    gap: 0.5rem;
}

.chart-btn {
    padding: 0.3rem 0.8rem;
    background: transparent;
    border: 1px solid #2a3a4a;
    border-radius: 5px;
    color: #b0b0b0;
    cursor: pointer;
    transition: 0.3s;
    font-size: 0.8rem;
}

.chart-btn:hover,
.chart-btn.active {
    background: #00ff9d;
    border-color: #00ff9d;
    color: #0a0f0f;
}

.chart-container {
    height: 250px;
    position: relative;
}

.chart-legend {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    margin-top: 1rem;
    padding-top: 1rem;
    border-top: 1px solid #2a3a4a;
}

.legend-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.9rem;
}

.legend-color {
    width: 12px;
    height: 12px;
    border-radius: 3px;
}

.legend-label {
    color: #b0b0b0;
}

.legend-value {
    color: #00ff9d;
    font-family: 'Share Tech Mono', monospace;
}

/* Bottom Grid */
.bottom-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
}

.recent-card {
    background: rgba(20, 30, 40, 0.8);
    border: 1px solid #2a3a4a;
    border-radius: 15px;
    padding: 1.5rem;
}

.card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
}

.card-title {
    font-family: 'Share Tech Mono', monospace;
    color: #00ff9d;
    font-size: 1.1rem;
}

.card-title i {
    margin-right: 0.5rem;
}

.card-link {
    color: #b0b0b0;
    text-decoration: none;
    font-size: 0.9rem;
    transition: 0.3s;
}

.card-link:hover {
    color: #00ff9d;
}

.card-link i {
    margin-left: 0.3rem;
    font-size: 0.8rem;
}

/* Data Table */
.table-responsive {
    overflow-x: auto;
}

.data-table {
    width: 100%;
    border-collapse: collapse;
}

.data-table th {
    text-align: left;
    padding: 1rem 0.5rem;
    color: #00ff9d;
    font-family: 'Share Tech Mono', monospace;
    font-size: 0.8rem;
    border-bottom: 1px solid #2a3a4a;
}

.data-table td {
    padding: 0.8rem 0.5rem;
    border-bottom: 1px solid #2a3a4a;
}

.data-table tr:hover {
    background: rgba(0, 255, 157, 0.05);
}

.user-info {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.user-avatar {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    border: 1px solid #00ff9d;
}

.points {
    font-family: 'Share Tech Mono', monospace;
    color: #00ff9d;
}

/* Badges */
.badge {
    display: inline-block;
    padding: 0.2rem 0.5rem;
    border-radius: 3px;
    font-size: 0.7rem;
    font-weight: 600;
}

.badge-vip {
    background: linear-gradient(45deg, #ffd700, #ffa500);
    color: #0a0f0f;
}

.badge-success {
    background: rgba(0, 255, 157, 0.2);
    color: #00ff9d;
    border: 1px solid #00ff9d;
}

.badge-danger {
    background: rgba(255, 95, 86, 0.2);
    color: #ff5f56;
    border: 1px solid #ff5f56;
}

.badge-warning {
    background: rgba(255, 189, 46, 0.2);
    color: #ffbd2e;
    border: 1px solid #ffbd2e;
}

.status-badge {
    padding: 0.3rem 1rem;
    border-radius: 20px;
    font-size: 0.7rem;
    font-weight: 600;
}

.status-healthy {
    background: rgba(0, 255, 157, 0.2);
    color: #00ff9d;
    border: 1px solid #00ff9d;
}

.status-warning {
    background: rgba(255, 189, 46, 0.2);
    color: #ffbd2e;
    border: 1px solid #ffbd2e;
}

/* Action Buttons */
.btn-action {
    padding: 0.3rem 0.5rem;
    background: transparent;
    border: 1px solid #2a3a4a;
    border-radius: 3px;
    color: #b0b0b0;
    cursor: pointer;
    transition: 0.3s;
    margin: 0 0.2rem;
}

.btn-action:hover {
    border-color: #00ff9d;
    color: #00ff9d;
}

/* Machines List */
.machines-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.machine-item {
    padding: 1rem;
    background: rgba(0, 0, 0, 0.2);
    border: 1px solid #2a3a4a;
    border-radius: 8px;
    transition: 0.3s;
}

.machine-item:hover {
    border-color: #00ff9d;
}

.machine-info {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.5rem;
    flex-wrap: wrap;
    gap: 0.5rem;
}

.machine-name {
    font-family: 'Share Tech Mono', monospace;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.difficulty-badge {
    padding: 0.2rem 0.5rem;
    border-radius: 3px;
    font-size: 0.6rem;
    text-transform: uppercase;
}

.difficulty-easy {
    background: rgba(0, 255, 157, 0.2);
    color: #00ff9d;
}

.difficulty-medium {
    background: rgba(255, 189, 46, 0.2);
    color: #ffbd2e;
}

.difficulty-hard {
    background: rgba(255, 95, 86, 0.2);
    color: #ff5f56;
}

.machine-stats {
    display: flex;
    gap: 1rem;
    font-size: 0.8rem;
    color: #b0b0b0;
}

.machine-stats i {
    color: #00ff9d;
    margin-right: 0.3rem;
}

.machine-progress .progress-bar {
    height: 4px;
}

/* Progress Bar */
.progress-bar {
    height: 6px;
    background: #2a3a4a;
    border-radius: 3px;
    overflow: hidden;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #00ff9d, #00b8ff);
    border-radius: 3px;
    transition: width 0.3s;
}

/* System Stats */
.system-stats {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.system-stat {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
}

.system-stat .stat-label {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.system-stat .stat-bar {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.system-stat .progress-bar {
    flex: 1;
    height: 8px;
}

.stat-value {
    font-family: 'Share Tech Mono', monospace;
    color: #00ff9d;
    min-width: 45px;
}

.system-info-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
    margin-top: 1rem;
    padding-top: 1rem;
    border-top: 1px solid #2a3a4a;
}

.info-item {
    text-align: center;
}

.info-label {
    font-size: 0.7rem;
    color: #6a7a8a;
    margin-bottom: 0.3rem;
}

.info-value {
    font-family: 'Share Tech Mono', monospace;
    color: #00ff9d;
    font-size: 1.1rem;
}

/* Quick Actions */
.quick-actions {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 1rem;
    margin-top: 1rem;
}

.quick-action-btn {
    background: rgba(20, 30, 40, 0.8);
    border: 1px solid #2a3a4a;
    border-radius: 10px;
    padding: 1rem;
    color: #b0b0b0;
    cursor: pointer;
    transition: 0.3s;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
}

.quick-action-btn:hover {
    border-color: #00ff9d;
    color: #00ff9d;
    transform: translateY(-3px);
    box-shadow: 0 5px 20px rgba(0, 255, 157, 0.2);
}

.quick-action-btn i {
    font-size: 1.5rem;
}

.quick-action-btn span {
    font-size: 0.8rem;
}

/* Text Utilities */
.text-center {
    text-align: center;
    padding: 2rem;
    color: #6a7a8a;
}

/* Responsive */
@media (max-width: 1200px) {
    .charts-grid {
        grid-template-columns: 1fr;
    }
    
    .bottom-grid {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 768px) {
    .welcome-card {
        flex-direction: column;
        text-align: center;
    }
    
    .stats-grid {
        grid-template-columns: 1fr;
    }
    
    .chart-header {
        flex-direction: column;
        gap: 1rem;
        align-items: flex-start;
    }
    
    .quick-actions {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 480px) {
    .quick-actions {
        grid-template-columns: 1fr;
    }
}
</style>
<script>
    // Soru gÃ¼ncelleme
async function updateQuestion(questionId, data) {
    const response = await fetch(`/admin/api/questions/${questionId}`, {
        method: 'PUT',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({
            title: data.title,
            description: data.description,
            flag: data.flag, // DÃ¼z flag, backend hash'leyecek
            points_reward: data.points,
            hint: data.hint,
            hint_cost: data.hintCost,
            is_active: data.isActive,
            question_order: data.order
        })
    });
    
    const result = await response.json();
    if (result.success) {
        alert('Soru gÃ¼ncellendi!');
    }
}
</script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery-sparkline@3.0.0/jquery.sparkline.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Sparklines
    $('.sparkline').sparkline('html', {
        type: 'line',
        lineColor: '#00ff9d',
        fillColor: 'rgba(0, 255, 157, 0.1)',
        spotColor: false,
        minSpotColor: false,
        maxSpotColor: false,
        height: '30px',
        width: '80px'
    });

    // Aktivite GrafiÄŸi
    const activityCtx = document.getElementById('activityChart').getContext('2d');
    window.activityChart = new Chart(activityCtx, {
        type: 'line',
        data: {
            labels: ['1. Hafta', '2. Hafta', '3. Hafta', '4. Hafta'],
            datasets: [{
                label: 'KullanÄ±cÄ±',
                data: [65, 72, 78, 85],
                borderColor: '#00ff9d',
                backgroundColor: 'rgba(0, 255, 157, 0.1)',
                tension: 0.4,
                fill: true
            }, {
                label: 'Ã‡Ã¶zÃ¼m',
                data: [45, 58, 62, 71],
                borderColor: '#ffbd2e',
                backgroundColor: 'rgba(255, 189, 46, 0.1)',
                tension: 0.4,
                fill: true
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                y: {
                    beginAtZero: true,
                    grid: {
                        color: '#2a3a4a'
                    },
                    ticks: {
                        color: '#b0b0b0'
                    }
                },
                x: {
                    grid: {
                        display: false
                    },
                    ticks: {
                        color: '#b0b0b0'
                    }
                }
            },
            plugins: {
                legend: {
                    labels: {
                        color: '#b0b0b0'
                    }
                }
            }
        }
    });

    // KullanÄ±cÄ± DaÄŸÄ±lÄ±mÄ± GrafiÄŸi
    const userCtx = document.getElementById('userChart').getContext('2d');
    new Chart(userCtx, {
        type: 'doughnut',
        data: {
            labels: ['Aktif', 'VIP', 'Yeni', 'Pasif'],
            datasets: [{
                data: [
                    {{.Stats.ActiveUsers}},
                    {{.Stats.TotalVIPUsers}},
                    {{.Stats.NewUsersToday}},
                    {{subtract .Stats.TotalUsers .Stats.ActiveUsers}}
                ],
                backgroundColor: [
                    '#00ff9d',
                    '#ffd700',
                    '#00b8ff',
                    '#6a7a8a'
                ],
                borderWidth: 0
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            cutout: '70%',
            plugins: {
                legend: {
                    display: false
                }
            }
        }
    });
});

// Grafik periyodu deÄŸiÅŸtir
function changeChartPeriod(period) {
    // Aktif butonu gÃ¼ncelle
    document.querySelectorAll('.chart-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    event.target.classList.add('active');
    
    // API'den yeni veri Ã§ek
    fetch(`/admin/api/stats?period=${period}`)
        .then(response => response.json())
        .then(data => {
            // GrafiÄŸi gÃ¼ncelle
            window.activityChart.data.datasets[0].data = data.users;
            window.activityChart.data.datasets[1].data = data.submissions;
            window.activityChart.update();
        });
}

// HÄ±zlÄ± iÅŸlem fonksiyonlarÄ±
function exportData() {
    window.location.href = '/admin/api/export';
}

function clearCache() {
    if (confirm('Cache temizlenecek. Emin misiniz?')) {
        fetch('/admin/api/clear-cache', { method: 'POST' })
            .then(() => alert('Cache temizlendi!'));
    }
}

function runBackup() {
    if (confirm('VeritabanÄ± yedeklemesi baÅŸlatÄ±lsÄ±n mÄ±?')) {
        fetch('/admin/api/backup', { method: 'POST' })
            .then(() => alert('Yedekleme baÅŸlatÄ±ldÄ±!'));
    }
}

function viewLogs() {
    window.location.href = '/admin/logs';
}

function editUser(userId) {
    window.location.href = `/admin/users/${userId}`;
}
</script>
{{end}}